# 数理セミナーI (第2回)

今回は、ディレクトリやファイルを操作するためのコマンドをマスターしましょう。

- [数理セミナーI (第2回)](#数理セミナーi-第2回)
  - [ディレクトリの作成・削除](#ディレクトリの作成削除)
    - [mkdir - 空のディレクトリを作成する](#mkdir---空のディレクトリを作成する)
    - [rmdir - 空のディレクトリを削除する](#rmdir---空のディレクトリを削除する)
  - [テキストファイルの内容を閲覧する](#テキストファイルの内容を閲覧する)
    - [cat - テキストファイルの内容を全て画面に表示](#cat---テキストファイルの内容を全て画面に表示)
    - [less - テキストファイルの内容を1画面ずつ表示](#less---テキストファイルの内容を1画面ずつ表示)
  - [文字列を画面やファイルに出力する](#文字列を画面やファイルに出力する)
    - [echo - 文字列を標準出力(画面)に送る](#echo---文字列を標準出力画面に送る)
    - [標準出力のリダイレクト](#標準出力のリダイレクト)
  - [ファイルのコピーと移動](#ファイルのコピーと移動)
    - [cp - ファイルのコピー](#cp---ファイルのコピー)
    - [mv - ファイルの移動・名前変更](#mv---ファイルの移動名前変更)
  - [ファイルの削除](#ファイルの削除)
    - [rm - ファイルを削除する](#rm---ファイルを削除する)
    - [空でないディレクトリを削除する](#空でないディレクトリを削除する)
  - [練習](#練習)

## ディレクトリの作成・削除

### mkdir - 空のディレクトリを作成する

`mkdir`コマンドは引数に指定した名前のディレクトリを作成します。ディレクトリ名は絶対あるいは相対パスで指定します(以降、全ての場合において、ディレクトリ名やファイル名を指定する際は、絶対パスと相対パスの両方が使えます)。

入力例:

```bash
# ホームディレクトリに移動
$ cd
# seminar1ディレクトリを作成(相対パス)
$ mkdir seminar1
# seminar1ディレクトリの存在を確認
$ ls
```

入力例

```bash
# ホームからの相対パスで作成する場合
$ mkdir ~/seminar1
# ホームに移動
$ cd
# 存在を確認
$ ls
```

ユーザーが指定したパスに対する書き込み権限をもっていない場合はエラーとなるので注意しましょう。たとえば、一般ユーザーはルートディレクトリ内の書き込み権限を持っていないので、`mkdir /hoge`はエラーとなります。通常、一般ユーザーは、ホームディレクトリ以下の全てのディレクトリに対して書き込み権限があり、それ以外の場所には書き込み権限がありません。

### rmdir - 空のディレクトリを削除する

`rmdir`コマンドは、引数に指定した名前のディレクトリを削除します。

```bash
# seminar1ディレクトリを削除
$ rmdir seminar1
```

ただし、`rmdir`で削除できるのは空のディレクトリだけですので注意しましょう。

## テキストファイルの内容を閲覧する

文字情報だけを含むファイルをテキストファイルと呼びます。テキストファイルは、各種Linuxコマンドにより、その内容をターミナルに出力することができます。一方、テキストファイル以外（たとえば画像ファイルや動画ファイル）の内容をターミナルに出力することは、通常できません。

**豆知識**：たとえば、ホームページを構成する**HTMLファイル**はテキストファイルです。ホームページは画像や動画を含みますが、それらはHTMLファイルとは別のファイルとして保存されているからです。一方、同じ文字を含むファイルでも、Microsoft Office Wordのファイルなどは、文字情報以外に様々な書式情報や図形、画像情報を含むので、テキストファイルではありません。テキストファイルではないファイルを**バイナリファイル**と呼ぶことがあります。

### cat - テキストファイルの内容を全て画面に表示

`cat`コマンドを用いると、引数に指定したファイルの中身を閲覧できます。ファイルの内容を全て画面に表示するので、短いファイルの閲覧に向いています。

入力例:

```bash
# ファイル/etc/os-releaseを閲覧
$ cat /etc/os-release
```

出力例:

```bash
NAME="Ubuntu"
VERSION="18.04.6 LTS (Bionic Beaver)"
ID=ubuntu
ID_LIKE=debian
PRETTY_NAME="Ubuntu 18.04.6 LTS"
VERSION_ID="18.04"
HOME_URL="https://www.ubuntu.com/"
SUPPORT_URL="https://help.ubuntu.com/"
BUG_REPORT_URL="https://bugs.launchpad.net/ubuntu/"
PRIVACY_POLICY_URL="https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"
VERSION_CODENAME=bionic
UBUNTU_CODENAME=bionic
```

### less - テキストファイルの内容を1画面ずつ表示

`less`コマンドは、ファイルの中身を1画面ずつ表示することができるので、特に長いファイルの閲覧に便利です。

入力例:

```bash
# CPU情報の閲覧
$ less /proc/cpuinfo
```

`less`でファイルの内容を表示している最中には、ファイル内を移動したり文字列を検索するための様々なキーバインドが利用可能です。

+ j - 1行下へ移動
+ k - 1行上へ移動
+ g - ファイル先頭へ移動
+ G - ファイル末尾へ移動
+ q - `less`コマンドを終了
+ / - 文字列を検索(`n`で次の候補、`Shift-n`で前の候補)

## 文字列を画面やファイルに出力する

### echo - 文字列を標準出力(画面)に送る

`echo`コマンドは、引数に与えた文字列を画面に印字するだけの簡単なコマンドですが、随所で役に立ちます。

入力例:

```bash
# Hello!と画面に出力
$ echo Hello!
```

### 標準出力のリダイレクト

次のように`echo`コマンドを使うと、画面だけでなく、ファイルに文字列を出力することが可能です。

入力例:

```bash
# 文字列Hello!をファイルhello.txtに出力
$ echo Hello! > hello.txt
$ cat hello.txt
```

出力例:

```bash
Hello!
```

記号`>`は、出力先を変更するという意味を持ちます。このような、出力先を変更する操作のことを、**標準出力のリダイレクト**と呼びます。標準出力とは、出力先を指定しなかった場合の出力先であり、通常はディスプレイを表します。

なお、`>`記号を使ってリダイレクトすると、出力先のファイルが既に存在する場合、内容を書き換えてしまいます。書き換えるのではなく、出力先のファイルの末尾に文字列を付け足したい場合は、記号`>>`を使います。

入力例:

```bash
$ echo Hello! > hello.txt
# 文字列Goodbye!をファイルhello.txtの末尾に追加
$ echo Goodbye! >> hello.txt
$ cat hello.txt
```

出力例:

```bash
Hello!
Goodbye!
```

なお、リダイレクト記号の`>`や`>>`は、`echo`だけでなく、標準出力を用いる多くのコマンドの出力先を変更するために使うことができます。たとえば、`cat`コマンドの出力を画面ではなく、ファイルに送ることが可能です。

入力例:

```bash
# catの出力をファイルhello2.txtにリダイレクト
$ cat hello.txt > hello2.txt
```

## ファイルのコピーと移動

### cp - ファイルのコピー

`cp`は、第1引数に指定したファイルを、第2引数に指定した名前のファイルにコピーします。

```bash
# hello.txtをgoodbye.txtにコピー
$ cp hello.txt goodbye.txt
# 内容が同じか確認
$ cat hello.txt
$ cat boodbye.txt
```

### mv - ファイルの移動・名前変更

`mv`は第1引数に指定したファイルを、第2引数に指定した場所に移動します。第2引数がディレクトリである場合、ファイルの名前は変更されず、そのディレクトリに移動します。

入力例:

```bash
# ディレクトリmydirを作成
$ mkdir mydir
# mydirにhello.txtを移動
$ mv hello.txt mydir
# 移動を確認
$ ls
$ ls mydir
```

第2引数がディレクトリではない場合、`mv`はそれがファイル名であるとみなし、その名前にファイル名を変更します。

入力例:

```bash
# ファイルhello.txtをgoodbye.txtに名前変更
$ mv hello.txt goodbye.txt
# 確認
$ ls
$ cat goodbye.txt
```

この場合、第2引数に与えるファイル名は、カレントディレクトリのパスである必要はありません。別のディレクトリのパスを与えると、そのディレクトリに移動すると同時に名前も変更されます。

入力例:

```bash
# hello.txtをmydir内に移動してgoodbye.txtに名前変更
$ mv hello.txt mydir/goodbye.txt
```

## ファイルの削除

### rm - ファイルを削除する

ファイルを削除するには、`rm`コマンドを使います。引数に削除したいファイルを指定します。

入力例:

```bash
# hello.txtを削除
$ rm hello.txt
```

通常、`rm`コマンドを実行すると、「削除しますか？」と尋ねられるので、削除するならば`y`と入力します。削除しない場合は`n`を入力します。

**注**: 実際には、`rm`のデフォルトの挙動では、何も確認せずに即座に削除が行われます。`rm`コマンドは、オプション`-i`を付けることにより、削除前に確認が行われるようになります。ただ、Ubuntuでは、各ユーザーの初期状態において、`rm`と入力すれば`rm -i`が実行されるように設定されています。このように、あるコマンドに付けられた別の名前をのことを**エイリアス**と呼びます。この場合`rm`は`rm -i`のエイリアスとなっています。オプション`-i`を無効にするにはオプション`-f`をつけます。

入力例:

```bash
# hello.txtを強制削除
$ rm -f hello.txt
```

ただし、`-f`オプションは危険なので、通常は使わないようにし、どうしても必要な場合には慎重に使うようにしましょう。

`rm`コマンドは、同時に複数のファイルを指定できます。

```bash
# ３つのファイルを削除
$ rm hello.txt hello2.txt hello3.txt
```

### 空でないディレクトリを削除する

`rm`コマンドを使うと、空でないディレクトリも削除することができます。そのためには、引数にディレクトリを指定し、`-r`オプションを付けます。

入力例:

```bash
# mydir内にファイルを作成
$ mkdir mydir
$ echo Hello! > mydir/hello.txt
# これはうまくいかない
$ rmdir mydir
# 代わりにこうする
$ rm -r mydir
```

ファイルが沢山あるディレクトリでは、いちいち確認を求められると大変ですので、そのようなディレクトリを削除するには、同時に`-f`オプションを指定します。

入力例:

```bash
# 空でないディレクトリmydirを強制削除
$ rmdir -rf mydir
```

## 練習
